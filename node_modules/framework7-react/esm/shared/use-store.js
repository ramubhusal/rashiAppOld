import { useState } from 'react';
import { f7 } from './f7';
import { useIsomorphicLayoutEffect } from './use-isomorphic-layout-effect';
export var useStore = function useStore() {
  // (store, getter)
  var store = arguments.length <= 0 ? undefined : arguments[0];
  var getter = arguments.length <= 1 ? undefined : arguments[1];

  if (arguments.length === 1) {
    // (getter)
    store = f7.store;
    getter = arguments.length <= 0 ? undefined : arguments[0];
  }

  var obj = store.getters[getter];

  var _useState = useState(obj.value),
      value = _useState[0],
      setValue = _useState[1];

  obj.onUpdated(setValue);
  useIsomorphicLayoutEffect(function () {
    return function () {
      // eslint-disable-next-line
      store.__removeCallback(setValue); // eslint-disable-next-line


      store.__removeCallback(obj.__callback);
    };
  });
  return value;
};